> 该算法主要应用于缓存（个人理解），Memcached客户端实现就是用该算法

### 有何用处？

> 分布式（这里针对数据）设计的初衷就是为了解决单一服务端负载过大的问题，所以在对系统做水平扩展后，数据要尽量均匀地分布在每台服务器节点的上（即不会出现热点数据节点）。其次，如果后期需要扩容或者某一节点发生故障需要从集群中剔除，那么处理后的分布式系统应该做到对已存储的数据影响最小，降低数据迁移的`成本`和`风险`。 

如果要设计一套KV存储的系统，用户PUT一个key和value，存储到系统中，并且提供用户根据key来GET对应的value。要求随着用户规模变大，系统是可以水平扩展的，主要要解决以下几个问题。

1. 系统是一个集群，包含很多节点，如何解决用户数据的存储问题？保证用户的数据尽可能平均分散到各个节点上。
2. 如果用户量增长，需要对集群进行扩容，扩容完成后如何解决数据重新分布？保证不会出现热点数据节点。

> **这里说到的缓存不涉及持久化，缓存失效后还需到数据库获取**

###算法实现问题：

1. 分布均匀（使用虚拟节点，添加更多的虚拟节点，达到hash分布均匀的目的）
2. 不能有规律的分布，例如：都是蓝色在前面的话，橙色的部分将会分到很少的部分，可使用murmur hash算法：[陌生但默默一统江湖的MurmurHash](http://calvin1978.blogcn.com/articles/murmur.html)
   ![](https://ws1.sinaimg.cn/large/8747d788gy1fsmrz7ahbaj20oh0ojjsm.jpg)
3. ~~无法解决一致性问题：添加服务器D后，再去掉服务器D，那么在新添加的服务器做了修改的数据不会更新到去掉服务器后的服务器C上，那么就会得到脏数据。~~ 会重新到数据库获取的



### 好处

1. 服务器节点分布均匀，数据存储也均匀
2. 服务器增删节点时，只会影响部分缓存命中